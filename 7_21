package ejer7_21;


import java.util.Scanner;

public class Graficos {

	public enum Estado{ARRIBA, ABAJO, IZQUIERDA, DERECHA}
	Estado apunta;
	boolean pluma;
	int f;		//posición actual x
	int c;		//posición actual y
	int v;		//desplazamiento
	

	String[] Comandos;
    int[][]piso;
    
    private int limup;		//límites de recorrido
	private int limdown;
	private int limder;
	private int limizq;
	
	Scanner input;  	
	boolean val;		//validación entrada
	String entrada;		//datos insertados por el usuario
	int put;           	//índice del comando en Comandos
	
	
    public Graficos() {
    	
    	f=0;
    	c=0;

    	apunta=Estado.DERECHA;
    	piso=new int[20][20];
    	pluma=false;
    	Comandos=new String[20];
    	
    	limup=0;
    	limdown=19;
    	limder=19;
    	limizq=0;   	
    	
    	input =new Scanner(System.in);
    	val=false;
    	entrada="";
    	put=0;
    			
    }
	
	
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		Graficos t=new Graficos();
		t.iniciar();
	}
	
	public void iniciar() {

		System.out.println("Bienvenido a la tortuga pintora. Escriba su selección hasta un máximo de 10 órdenes.\n"
				+ "Para finalizar pulse 9 y su tortuga cerará una obra de arte");
		System.out.println();
		
		do {
			System.out.println("Escriba un comando: ");
			System.out.println("1:   PLuma arriba (no pinta)");
			System.out.println("2:   Pluma abajo(pinta)");
			System.out.println("3:   Girar a la derecha. ");
			System.out.println("4:   Girar a la izquierda");
			System.out.println("5,n: Avanzar n espacios(max 19).");
		System.out.println("6:   Visionar obra de arte");
		System.out.println("9:   Fin de los comandos");
		
		System.out.println("------->");
		entrada=input.next();
		
		validar();
		if(entrada.equalsIgnoreCase("9")||Comandos[18]!=null){
		Comandos[19]="6";
		val=true;
		} 
		input.nextLine();
		}while(!val);
		System.out.println("fin val");	
		
		for(int i=0; i<Comandos.length; i++)
			System.out.println(Comandos[i]+"");
		
		reset();
		ejecutar();
	
			
	}
	
	public void validar() {
		
		
		boolean coma=false;
		if ((entrada.charAt(0)=='5')&&(entrada.charAt(1)==',')) coma=true;
		
		
		if(entrada.equals("1")) { 
			Paint();
			Comandos[put]=entrada;
			put++;
		}
		else if(entrada.equals("2")) { 
			Paint();
			Comandos[put]=entrada;
			put++;
		}
		else if(entrada.equals("3")) { 
			
			derecha();
			Estado();
			Comandos[put]=entrada;
			put++;
		}
		else if(entrada.equals("4")) { 
			
			izquierda();
			Estado();
			Comandos[put]=entrada;
			put++;
		}
		else if(entrada.equals("6")) { Comandos[put]=entrada;
		put++;
		}
		else if(entrada.equals("9")) { System.out.println("Painting...");
		}
		else if((coma)&&(entrada.length()==3)){
				if((Integer.parseInt(entrada.substring(2, 3))<=9)&&(Integer.parseInt(entrada.substring(2, 3))>0)) {
				v=Integer.parseInt(entrada.substring(2, 3));
				if(movimiento()) {Comandos[put]=entrada;
				put++;}
				Estado();}
				}
	
		else if((coma)&&(entrada.length()==4)){
			
			if((Integer.parseInt(entrada.substring(2, 3))==1)&& 
					((Integer.parseInt(entrada.substring(3, 4))<=9)&&
						(Integer.parseInt(entrada.substring(3, 4))>=0))) {
				v=Integer.parseInt(entrada.substring(2, 4));
				if(movimiento()) {Comandos[put]=entrada;
				put++;}
				Estado();}
			else System.out.println("INTRODUZCA DATOS CORRECTOS");
		}
			
		else System.out.println("INTRODUZCA DATOS CORRECTOS POR FAVOR");
			
	}
	
	
	
	public void Paint() {
		
		if(entrada.equals("1")) {System.out.print("Pluma up\n");
		pluma=false;
		}
		if(entrada.equals("2")) {System.out.print("Pluma down\n"); 
		pluma=true;
		}
	}
		
	
	public void Estado() {
		
		System.out.println( "La Tortuga apunta a "+ apunta+"\nLa pluma"+ (pluma ? " pinta": " no pinta")
				+ "\nLa posición actual es\t\t\t["+f+"] ["+c+ 
				"]\nLa distancia hasta la derecha es \t"+ Math.abs(limder-c)+"\nLa "
				+ "distancia hasta abajo es \t\t"+ Math.abs(limdown-f)+ "\nLa distancia hasta el muro"
				+ " izquierdo es "+ Math.abs(limizq-c)+ "\nLa distancia hasta arriba es \t\t"+Math.abs(limup-f));
				
	}
	
	public void reset() {
		
		f=0;
		c=0;
		apunta=Estado.DERECHA;
	}
	
	public boolean movimiento() {
		
		switch(apunta) {
		
		case DERECHA: 	if(v>Math.abs(limder-c)) { System.out.print("Te sales por la derecha\n");
						return false;}
						else {c+=v; 
						System.out.print("Vas bien wey\n");
						return true;
						}
						
		case ABAJO:   	if(v>Math.abs(limdown-f)) { System.out.print("Te sales por abajo\n");
					    return false;}
						else{f+=v; 
						System.out.print("Vas bien wey\n");
						return true;
						}
					    
		case IZQUIERDA: if(v>Math.abs(limizq-c)) { System.out.print("Te sales por la izquierda\n");
						return false;}
						else {c-=v; 
						System.out.print("Vas bien wey\n");
						return true;
						}
						
		case ARRIBA: 	if(v>Math.abs(limup-f)) { System.out.print("Te sales por la arriba\n");
						return false;}
						else{f-=v; 
						System.out.print("Vas bien wey\n");
						return true;
						}
		}
		
		return true;
	}
	
	
	public void derecha(){
		
		if(apunta==Estado.DERECHA) apunta=Estado.ABAJO;
		else if(apunta==Estado.ABAJO) apunta=Estado.IZQUIERDA;
		else if(apunta==Estado.IZQUIERDA) apunta=Estado.ARRIBA;
		else if(apunta==Estado.ARRIBA) apunta=Estado.DERECHA;
		
	}
	
	public void izquierda(){
		
		if(apunta==Estado.DERECHA) apunta=Estado.ARRIBA;
		else if(apunta==Estado.ARRIBA) apunta=Estado.IZQUIERDA;
		else if(apunta==Estado.IZQUIERDA) apunta=Estado.ABAJO;
		else if(apunta==Estado.ABAJO) apunta=Estado.DERECHA;
		
	}
	 
	public void imprimir() {
		
		piso[0][0]=1;
		
		for (int i=0; i<piso.length; i++) {
			System.out.println();
			for(int j=0; j<piso[i].length; j++)
						
				System.out.print(piso[i][j]==1?"* ": " ");}
		
		for (int i=0; i<piso.length; i++) {
			System.out.println();
			for(int j=0; j<piso[i].length; j++)
						
				System.out.print(piso[i][j]);}
	
	}
	
	
	public void avanzar(int v) {
		
		if(apunta==Estado.DERECHA) {
			
			for(int i=0; i<v; i++) piso[f][c+i]=pluma? 1:0;
			c+=v-1;
			
			
		}
		
		else if(apunta==Estado.ABAJO) {
			
			for(int i=0; i<v; i++) piso[f+i][c]=pluma? 1:0;
			f+=v-1;
			
		}
		
		else if(apunta==Estado.IZQUIERDA) {
			
			for(int i=0; i<v; i++) piso[f][c-i]=pluma? 1:0;
			c-=v-1;
		}
		
		else if(apunta==Estado.ARRIBA) {
			
			for(int i=0; i<v; i++) piso[f-i][c]=pluma? 1:0;
			f-=v-1;
		}
	
	}
	
	
	public void ejecutar() {
		
		for(int i=0; i<Comandos.length; i++) {
			
			if(Comandos[i]==null) break;
			
			String comando= Comandos[i].substring(0, 1);
			
		switch(comando) {
		
		case "1": pluma=false;
		break;
				
		case "2": pluma=true;
		break;
		
		case "3": derecha();
		break;
		
		case "4": izquierda();
		break;
		
		case "5":
			
			if(Comandos[i].length()==3)
			avanzar(Integer.parseInt(Comandos[i].substring(2, 3)));
			
			else avanzar(Integer.parseInt(Comandos[i].substring(2, 4)));
		break;
		
		case "6": imprimir();
		break;
		
		
			}//fin de switch
    	}//fin for
	}//fin método ejecutar
	
}

